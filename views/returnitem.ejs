<%- include('nav bar/navbar.ejs') %>
    <title>ITEM Database</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel='stylesheet' href='/stylesheets/receipt.css' />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
   

<head> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>


<style>

.delete-button {
   
    color: #ffffff; 
    border: none;
    padding: 5px 10px;
    cursor: pointer;

    transition: transform 0.3s ease;
  }

  .delete-button i {
    /* Style the icon */
    color: #000000; /* Set the icon color */
    margin-right: 5px;
    transform: scale(1.3);
    transition-delay: 0.5s;
    color: red;
  }
  .delete-button:hover {
    /* Increase size on hover */
    transform: scale(1.6);
   
  }






.form-row {
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 15px;
  overflow: hidden;
  background-color: #f5f5f5;
  transition: box-shadow 0.3s ease;
  width: 110%;
  margin: 20px;
}

/* Style the serial number column */
.serial-number {
  font-weight: bold;
  padding: 10px;
  border-right: 1px solid #ddd;
  background-color: #e0e0e0;
}

/* Style the input fields */
input[type="datetime-local"],
input[type="text"] {
  width: 100%;
  padding: 12px;
  margin: 5px 0;
  box-sizing: border-box;
  border: 1px solid #ccc;
  border-radius: 5px;
  font-family: 'Arial', sans-serif;
}

/* Style the autocomplete dropdown */
.autocomplete-dropdown {
  width: 30%;
}

/* Style the delete button */


/* Add some margin to the delete button */
.delete-button {
  margin-top: 2px;
}

/* Style the table row on hover for better UX */
.form-row:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}






/* Center the submit button */
input[type="submit"] {
  display: block;
  margin: 0 auto;
  margin-bottom: 20px;
  background-color: #3498db;
  color: #fff;
  padding: 12px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s ease;
  
}

input[type="submit"]:hover {
  background-color: #2980b9;
}


.add-more-button {
    padding: 10px;
    margin: 20px; 
  }

  
  table {
    width: 102%;
    border-collapse: collapse;
    margin: 10px;
  }
  th, td {
    padding: 8px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  
  th:nth-child(2),
  td:nth-child(2) {
    width: 20%; /* You can adjust this value as needed */
  }

  th:nth-child(6),
  td:nth-child(6) {
    width: 15%; /* You can adjust this value as needed */
  }

  th:nth-child(7),
  td:nth-child(7) {
    width: 10%; /* You can adjust this value as needed */
  }
  /* Adjust the width of the Item Name column */
  th:nth-child(3),
  td:nth-child(3) {
    width: 25%; /* You can adjust this value as needed */
  }
  
  th:nth-child(4),
  td:nth-child(4),
  th:nth-child(5),
  td:nth-child(5) {
    width: 14%; 
  }

  h1 {
    color: #333; /* Set your desired text color */
    font-family: 'Arial', sans-serif; /* Set your desired font family */
    font-size: 24px; /* Set your desired font size */
    margin: 20px; /* Set your desired margin */
  
  }

  .header-container h1,
.header-container button {
  display: inline-block; /* or 'inline' depending on your styling requirements */
  vertical-align: middle; /* Align elements vertically */
  margin: 5; /* Remove default margins */
}


</style>

<style>
    .datetime
    {
margin: 10px;
    }
</style>



<main class="table">
  <div class="form-conntainer" style=" height: 650px;   overflow-y: auto;">
  <section class="table__header">
      <h1>Receipt No: #TT/1313</h1>       
  </section>
  
  <section class="table__body">

    <div class="header-container">
      
    </div>
    


    <form action="/savereturnitem/<%= receiptEdit._id %>" method="POST">
  
     
        <table>
          <h3 style="margin: 10px">
             Show Date AND Time
          </h3>
          <input type="datetime-local" name="datetimeshow" id="datetimeshow" style="margin: 15px; width: 1100px">
          <h3 style="margin: 10px">
            Actual Date AND Time
        </h3>
        <input type="datetime-local" name="datetimeactual" style="margin: 15px; width: 1100px">
        <div><bold>General item</bold></div>
        <thead>
          <tr>
            <th>Item Name</th>
            <th>Comment</th>
            <th>Quantity</th>
            
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="form-rows">

            <% receiptEdit.generalitemreceipt.forEach(item => { %>
              <% var a = item.Quantity; %>
           <tr>
         <% item.onngoing.forEach(itemm => { %> 
          
          <%  a= a - itemm.quantity %>


          <% }); %>
            <input type="text" name="idd[]" hidden value="<%= item._id %>">
            <input type="text" name="itemname[]" hidden value="<%= item.itemoutname %>">
            <input type="number" name="check[]" hidden value="1">
            <td>
      <%= item.itemoutname %> (<%= a %>)
            </td>
            <td>
                <input type="text" name="Comment[]"placeholder="Enter comment if any" >
          </td>
       <td>
        <input type="text" name="quantity[]" placeholder="Quantity">
         </td>
         
         <td>
                 <a href="/correct/<%= item._id %>"><i class="fa-solid fa-pen-to-square"></i></a>
                                                <button type="button" class="delete-button" ><i class="fa-solid fa-trash-can"></i> </button>
                                            </td>
         </tr>
         <% }); %>
        
        
        </tbody>
        <tbody id="form-rows">

          <% receiptEdit.scaffoldingitemreceipt.forEach(item => { %>
       
         <tr>
          <input type="text" name="idd[]" hidden value="<%= item._id %>">
          <input type="text" name="Scaffoldingid[]" hidden value="<%= item._id %>">
          <input type="text" name="itemname[]" hidden value="Scaffolding <%= item.lengthoutscaffolding %>ft X <%=item.heightoutscaffolding %>ft X <%=item.breadthscaffolding %>ft">
          <input type="number" name="check[]" hidden value="2">
          <td>
           Scaffolding <%= item.lengthoutscaffolding %>ft X <%=item.heightoutscaffolding %>ft X <%=item.breadthscaffolding %>ft
   
          </td>
          <td>
              <input type="text" name="Comment[]"placeholder="Enter comment if any" >
        </td>
     <td>
      <input type="text" name="quantity[]" placeholder="Quantity">
       </td>
       
       <td>
               <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                                              <button type="button" class="delete-button" ><i class="fa-solid fa-trash-can"></i> </button>
      </td>
       </tr>

<% if(item.cuplock10ftno){  %>
       <tr>
      
        
     
            <input type="text" name="idd[]" hidden value="<%= item._id %>">
            <input type="number" name="check[]" hidden value="2">
            <input type="text" name="itemname[]" hidden value="Cuplock 10ft">
            <td>
      Cuplock 10ft : <%= item.cuplock10ftno %>
     
            </td>
            <td>
                <input type="text" name="Comment[]"placeholder="Enter comment if any" >
          </td>
       <td>
        <input type="text" name="quantity[]" placeholder="Quantity">
         </td>
         
         <td>
                 <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                                                <button type="button" class="delete-button" ><i class="fa-solid fa-trash-can"></i> </button>
                                            </td>
         </tr>
         <% }  %>  
         <% if(item.cuplock5ftno){ %>
          <tr><input type="number" name="check[]" hidden value="2">
              <input type="text" name="idd[]" hidden value="<%= item._id %>">
              <input type="text" name="itemname[]" hidden value="Cuplock 5ft">
              <td>
                  Cuplock 5ft : <%= item.cuplock5ftno %>
              </td>
              <td>
                  <input type="text" name="Comment[]" placeholder="Enter comment if any">
              </td>
              <td>
                  <input type="text" name="quantity[]" placeholder="Quantity">
              </td>
              <td>
                  <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                  <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
              </td>
          </tr>
      <% } %>
      <% if(item.cuplock8ftno){ %>
        <tr><input type="number" name="check[]" hidden value="2">
            <input type="text" name="idd[]" hidden value="<%= item._id %>">
            <input type="text" name="itemname[]" hidden value="	Cuplock 8ft">
            <td>
                Cuplock 8ft : <%= item.cuplock8ftno %>
            </td>
            <td>
                <input type="text" name="Comment[]" placeholder="Enter comment if any">
            </td>
            <td>
                <input type="text" name="quantity[]" placeholder="Quantity">
            </td>
            <td>
                <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
            </td>
        </tr>
    <% } %>
    <% if(item.ledger5ftno){ %>
      <tr><input type="number" name="check[]" hidden value="2">
          <input type="text" name="idd[]" hidden value="<%= item._id %>">
          <input type="text" name="itemname[]" hidden value="Ledger 5ft">
          <td>
              Ledger 5ft : <%= item.ledger5ftno %>
          </td>
          <td>
              <input type="text" name="Comment[]" placeholder="Enter comment if any">
          </td>
          <td>
              <input type="text" name="quantity[]" placeholder="Quantity">
          </td>
          <td>
              <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
              <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
          </td>
      </tr>
  <% } %>
  <% if(item.ledger3ftno){ %>
    <tr><input type="number" name="check[]" hidden value="2">
        <input type="text" name="idd[]" hidden value="<%= item._id %>">
        <input type="text" name="itemname[]" hidden value="Ledger 3ft">
        <td>
            Ledger 3ft : <%= item.ledger3ftno %>
        </td>
        <td>
            <input type="text" name="Comment[]" placeholder="Enter comment if any">
        </td>
        <td>
            <input type="text" name="quantity[]" placeholder="Quantity">
        </td>
        <td>
            <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
            <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
        </td>
    </tr>
<% } %>
<% if(item.ledger6ft5inchno){ %>
  <tr><input type="number" name="check[]" hidden value="2">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value="ledger 6.5ft">
      <td>
          Ledger 6ft 5inch : <%= item.ledger6ft5inchno %>
      </td>
      <td>
          <input type="text" name="Comment[]" placeholder="Enter comment if any">
      </td>
      <td>
          <input type="text" name="quantity[]" placeholder="Quantity">
      </td>
      <td>
          <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
          <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
      </td>
  </tr>
<% } %>

<% if(item.pinscaffoldingno){ %>
  <tr><input type="number" name="check[]" hidden value="2">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value="Pin">
      <td>
          Pin Scaffolding : <%= item.pinscaffoldingno %>
      </td>
      <td>
          <input type="text" name="Comment[]" placeholder="Enter comment if any">
      </td>
      <td>
          <input type="text" name="quantity[]" placeholder="Quantity">
      </td>
      <td>
          <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
          <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
      </td>
  </tr>
<% } %>

<% if(item.woodernchaliscaffolding){ %>
  <tr><input type="number" name="check[]" hidden value="2">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value="Woodern Chali">
      <td>
          Wooden Chali Scaffolding : <%= item.woodernchaliscaffolding %>
      </td>
      <td>
          <input type="text" name="Comment[]" placeholder="Enter comment if any">
      </td>
      <td>
          <input type="text" name="quantity[]" placeholder="Quantity">
      </td>
      <td>
          <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
          <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
      </td>
  </tr>
<% } %>


<% if(item.steelchalscaffolding){ %>
  <tr><input type="number" name="check[]" hidden value="2">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value="Steel Chali">
      <td>
          Steel Chali Scaffolding : <%= item.steelchalscaffolding %>
      </td>
      <td>
          <input type="text" name="Comment[]" placeholder="Enter comment if any">
      </td>
      <td>
          <input type="text" name="quantity[]" placeholder="Quantity">
      </td>
      <td>
          <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
          <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
      </td>
  </tr>
<% } %>


<% if(item.wheelscaffolding){ %>
  <tr><input type="number" name="check[]" hidden value="2">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value="Wheel">
      <td>
          Wheel Scaffolding : <%= item.wheelscaffolding %>
      </td>
      <td>
          <input type="text" name="Comment[]" placeholder="Enter comment if any">
      </td>
      <td>
          <input type="text" name="quantity[]" placeholder="Quantity">
      </td>
      <td>
          <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
          <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
      </td>
  </tr>
<% } %>

      
        
   
     
     </tr>
       <% }); %>
       
      </tbody>
      <tbody id="form-rows">

        <% receiptEdit.farmaitemreceipt.forEach(item => { %>
     
       <tr>
        <input type="text" name="idd[]" hidden value="<%= item._id %>">
        <input type="text" name="Scaffoldingid[]" hidden value="<%= item._id %>">
        <input type="text" name="itemname[]" hidden value="Scaffolding <%= item.lengthoutscaffolding %>ft X <%=item.heightoutscaffolding %>ft X <%=item.breadthscaffolding %>ft">
        <input type="number" name="check[]" hidden value="3">
        <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">

        <td>
         Farma <%= item.length1farma %> X <%=item.length1farma %> ( <%= item.noofsetsfarma %> Set )
 
        </td>
        <td>
            <input type="text" name="Comment[]"placeholder="Enter comment if any" >
      </td>
   <td>
    <input type="text" name="quantity[]" placeholder="Quantity Whole set">
     </td>
     
     <td>
             <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                                            <button type="button" class="delete-button" ><i class="fa-solid fa-trash-can"></i> </button>
    </td>
     </tr>

<% if(item.plate9inchfarma){  %>
     <tr>
    
      
       <input type="text" name="idd[]" hidden value="<%= item._id %>">
       <input type="number" name="check[]" hidden value="3">
       <input type="text" name="itemname[]" hidden value='Farma plate 9" '>
       <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
          <td>
    Plate 9" : <%= item.plate9inchfarma %>
   
          </td>
          <td>
              <input type="text" name="Comment[]"placeholder="Enter comment if any" >
        </td>
     <td>
      <input type="text" name="quantity[]" placeholder="Quantity">
       </td>
       
       <td>
               <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                                              <button type="button" class="delete-button" ><i class="fa-solid fa-trash-can"></i> </button>
                                          </td>
       </tr>
       <% }  %>  
       <% if(item.plate12inchfarma){ %>
        <tr><input type="number" name="check[]" hidden value="3">
          <input type="text" name="idd[]" hidden value="<%= item._id %>">
         
            <input type="text" name="itemname[]" hidden value='Farma plate 12"'>
            <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
            <td>
              Plate 12" : <%= item.plate12inchfarma %><%= item.heightfarma %>
            </td>
            <td>
                <input type="text" name="Comment[]" placeholder="Enter comment if any">
            </td>
            <td>
                <input type="text" name="quantity[]" placeholder="Quantity">
            </td>
            <td>
                <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
                <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
            </td>
        </tr>
    <% } %>
    <% if(item.plate15inchfarma){ %>

      <tr><input type="number" name="check[]" hidden value="3">
          <input type="text" name="idd[]" hidden value="<%= item._id %>">
          <input type="text" name="itemname[]" hidden value='Farma plate 15"'>
          <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
          <td>
            Plate 15" : <%= item.plate15inchfarma %>
          </td>
          <td>
              <input type="text" name="Comment[]" placeholder="Enter comment if any">
          </td>
          <td>
              <input type="text" name="quantity[]" placeholder="Quantity">
          </td>
          <td>
              <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
              <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
          </td>
      </tr>
  <% } %>
  <% if(item.plate18inchfarma){ %>
    <tr><input type="number" name="check[]" hidden value="3">
      <input type="text" name="idd[]" hidden value="<%= item._id %>">
      <input type="text" name="itemname[]" hidden value='Farma plate 18"'>
      <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
        <td>
          Plate 18" : <%= item.plate18inchfarma %>
        </td>
        <td>
            <input type="text" name="Comment[]" placeholder="Enter comment if any">
        </td>
        <td>
            <input type="text" name="quantity[]" placeholder="Quantity">
        </td>
        <td>
            <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
            <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
        </td>
    </tr>
<% } %>

<% if(item.plate21inchfarma){ %>
  <tr><input type="number" name="check[]" hidden value="3">
    <input type="text" name="idd[]" hidden value="<%= item._id %>">
    <input type="text" name="itemname[]" hidden value='Farma plate 21"'>
    <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
    <td>
      Plate 21" : <%= item.plate21inchfarma %>
    </td>
    <td>
        <input type="text" name="Comment[]" placeholder="Enter comment if any">
    </td>
    <td>
        <input type="text" name="quantity[]" placeholder="Quantity">
    </td>
    <td>
        <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
        <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
    </td>
</tr>
<% } %>

<% if(item.plate24inchfarma){ %>
  <tr><input type="number" name="check[]" hidden value="3">
    <input type="text" name="idd[]" hidden value="<%= item._id %>">
    <input type="text" name="itemname[]" hidden value='Farma plate 24"'>
    <input type="text" name="height[]" hidden value="<%= item.heightfarma %>">
    <td>
      Plate 24" : <%= item.plate24inchfarma %>
    </td>
    <td>
        <input type="text" name="Comment[]" placeholder="Enter comment if any">
    </td>
    <td>
        <input type="text" name="quantity[]" placeholder="Quantity">
    </td>
    <td>
        <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
        <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
    </td>
</tr>
<% } %>

<% if(item.plate27inchfarma){ %>
  <tr><input type="number" name="check[]" hidden value="3">
    <input type="text" name="idd[]" hidden value="<%= item._id %>">
    <input type="text" name="itemname[]" hidden value='Farma plate 27"'>
    <input type="text" name="height[]" hidden value="2">
    <td>
      Plate 27" : <%= item.plate24inchfarma %>
    </td>
    <td>
        <input type="text" name="Comment[]" placeholder="Enter comment if any">
    </td>
    <td>
        <input type="text" name="quantity[]" placeholder="Quantity">
    </td>
    <td>
        <a href="/correct/"><i class="fa-solid fa-pen-to-square"></i></a>
        <button type="button" class="delete-button"><i class="fa-solid fa-trash-can"></i></button>
    </td>
</tr>
<% } %>






    
      
 
   
   </tr>
     <% }); %>
     
    </tbody>
      </table>
  
  
      <br><br>
  
    
      <p id="result"></p>
      <input type="submit" value="Submit">
    </form>
  </section>


  </div>
</main>


<script>
    // Function to update the input with current date and time
    function updateDateTime() {
        var now = new Date();
        var year = now.getFullYear();
        var month = String(now.getMonth() + 1).padStart(2, '0'); // Months are zero-based
        var day = String(now.getDate()).padStart(2, '0');
        var hours = String(now.getHours()).padStart(2, '0');
        var minutes = String(now.getMinutes()).padStart(2, '0');

        var formattedDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
        
        // Set the value of the input
        document.getElementById('datetimeshow').value = formattedDateTime;
    }
    updateDateTime();

   
</script>











    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

   


   
    
 



      <%- include('nav bar/navbardown.ejs') %>